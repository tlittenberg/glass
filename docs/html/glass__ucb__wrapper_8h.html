<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GLASS: globalfit/src/glass_ucb_wrapper.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="GLASS.png"/></td>
  <td id="projectalign">
   <div id="projectname">GLASS
   </div>
   <div id="projectbrief">Global LISA Analysis Software Suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('glass__ucb__wrapper_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">glass_ucb_wrapper.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Wrapper functions to UCB sampler.  
<a href="#details">More...</a></p>

<p><a href="glass__ucb__wrapper_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structUCBData.html">UCBData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collection of all structures needed for UCB sampler plus metadata.  <a href="structUCBData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a39b9bd3f1c45e3b6ee38c679bdb13034" id="r_a39b9bd3f1c45e3b6ee38c679bdb13034"><td class="memItemLeft" align="right" valign="top"><a id="a39b9bd3f1c45e3b6ee38c679bdb13034" name="a39b9bd3f1c45e3b6ee38c679bdb13034"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>alloc_ucb_data</b> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data, int procID)</td></tr>
<tr class="memdesc:a39b9bd3f1c45e3b6ee38c679bdb13034"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory for UCB structures. <br /></td></tr>
<tr class="separator:a39b9bd3f1c45e3b6ee38c679bdb13034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cde83c4a3ac7eb9b865ff213dd129c7" id="r_a2cde83c4a3ac7eb9b865ff213dd129c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2cde83c4a3ac7eb9b865ff213dd129c7">setup_ucb_data</a> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data, struct <a class="el" href="structTDI.html">TDI</a> *tdi_full)</td></tr>
<tr class="memdesc:a2cde83c4a3ac7eb9b865ff213dd129c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize memory for GB structures.  <br /></td></tr>
<tr class="separator:a2cde83c4a3ac7eb9b865ff213dd129c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19898631b49323912e75b970ef4c0971" id="r_a19898631b49323912e75b970ef4c0971"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19898631b49323912e75b970ef4c0971">setup_frequency_segment</a> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data)</td></tr>
<tr class="memdesc:a19898631b49323912e75b970ef4c0971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns frequency segment to UCB process.  <br /></td></tr>
<tr class="separator:a19898631b49323912e75b970ef4c0971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c8372b11cc8892a54862d1c8399c4a" id="r_ae2c8372b11cc8892a54862d1c8399c4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2c8372b11cc8892a54862d1c8399c4a">select_frequency_segment</a> (struct <a class="el" href="structData.html">Data</a> *data, struct <a class="el" href="structTDI.html">TDI</a> *tdi_full)</td></tr>
<tr class="memdesc:ae2c8372b11cc8892a54862d1c8399c4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads data from analysis bandwidth.  <br /></td></tr>
<tr class="separator:ae2c8372b11cc8892a54862d1c8399c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d3fe7566977e0d76dd4e4b96374fd8" id="r_a97d3fe7566977e0d76dd4e4b96374fd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97d3fe7566977e0d76dd4e4b96374fd8">initialize_ucb_sampler</a> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data)</td></tr>
<tr class="memdesc:a97d3fe7566977e0d76dd4e4b96374fd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize state of UCB model.  <br /></td></tr>
<tr class="separator:a97d3fe7566977e0d76dd4e4b96374fd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab084e3d2014cad2518adba58bddf8d4d" id="r_ab084e3d2014cad2518adba58bddf8d4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab084e3d2014cad2518adba58bddf8d4d">update_ucb_sampler</a> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data)</td></tr>
<tr class="memdesc:ab084e3d2014cad2518adba58bddf8d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evolve state of UCB model.  <br /></td></tr>
<tr class="separator:ab084e3d2014cad2518adba58bddf8d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd6d3a28d27c6566bd9add6ddec281a" id="r_adcd6d3a28d27c6566bd9add6ddec281a"><td class="memItemLeft" align="right" valign="top"><a id="adcd6d3a28d27c6566bd9add6ddec281a" name="adcd6d3a28d27c6566bd9add6ddec281a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>exchange_ucb_source_params</b> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data)</td></tr>
<tr class="memdesc:adcd6d3a28d27c6566bd9add6ddec281a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send/Receive UCB params from neighboring segments. <br /></td></tr>
<tr class="separator:adcd6d3a28d27c6566bd9add6ddec281a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a518b20ff470ffe865185f399d315a472" id="r_a518b20ff470ffe865185f399d315a472"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a518b20ff470ffe865185f399d315a472">get_ucb_status</a> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data, int Nproc, int root, int procID)</td></tr>
<tr class="memdesc:a518b20ff470ffe865185f399d315a472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send/Receive UCB sampler status.  <br /></td></tr>
<tr class="separator:a518b20ff470ffe865185f399d315a472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d76c71cb599cbeea8a9f4338e2ec02c" id="r_a0d76c71cb599cbeea8a9f4338e2ec02c"><td class="memItemLeft" align="right" valign="top"><a id="a0d76c71cb599cbeea8a9f4338e2ec02c" name="a0d76c71cb599cbeea8a9f4338e2ec02c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>print_ucb_state</b> (struct <a class="el" href="structUCBData.html">UCBData</a> *ucb_data, FILE *fptr, int counter)</td></tr>
<tr class="memdesc:a0d76c71cb599cbeea8a9f4338e2ec02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print current state of sampler in single line indexed by overall iteration number. <br /></td></tr>
<tr class="separator:a0d76c71cb599cbeea8a9f4338e2ec02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wrapper functions to UCB sampler. </p>
<p>Functions for handling the memory, data sharing, and sampling of the UCB block for the global fit analysis. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a518b20ff470ffe865185f399d315a472" name="a518b20ff470ffe865185f399d315a472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a518b20ff470ffe865185f399d315a472">&#9670;&#160;</a></span>get_ucb_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_ucb_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structUCBData.html">UCBData</a> *</td>          <td class="paramname"><span class="paramname"><em>ucb_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>Nproc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>root</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>procID</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send/Receive UCB sampler status. </p>
<dl class="section return"><dt>Returns</dt><dd>0 when all UCB samplers are complete </dd></dl>

</div>
</div>
<a id="a97d3fe7566977e0d76dd4e4b96374fd8" name="a97d3fe7566977e0d76dd4e4b96374fd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d3fe7566977e0d76dd4e4b96374fd8">&#9670;&#160;</a></span>initialize_ucb_sampler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_ucb_sampler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structUCBData.html">UCBData</a> *</td>          <td class="paramname"><span class="paramname"><em>ucb_data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize state of UCB model. </p>
<p>Prepares UCB data structures for sampling, including setting the parallel tempering scheme, proposal distributions, and initial state of the model. </p>

</div>
</div>
<a id="ae2c8372b11cc8892a54862d1c8399c4a" name="ae2c8372b11cc8892a54862d1c8399c4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c8372b11cc8892a54862d1c8399c4a">&#9670;&#160;</a></span>select_frequency_segment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void select_frequency_segment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structData.html">Data</a> *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structTDI.html">TDI</a> *</td>          <td class="paramname"><span class="paramname"><em>tdi_full</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads data from analysis bandwidth. </p>
<p>Copies subset of <a class="el" href="structTDI.html" title="Structure for Time Delay Interferometry data and metadata.">TDI</a> data in <code>tdi_full</code> to <code>data</code> corresponding to analysis window </p>

</div>
</div>
<a id="a19898631b49323912e75b970ef4c0971" name="a19898631b49323912e75b970ef4c0971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19898631b49323912e75b970ef4c0971">&#9670;&#160;</a></span>setup_frequency_segment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_frequency_segment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structUCBData.html">UCBData</a> *</td>          <td class="paramname"><span class="paramname"><em>ucb_data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns frequency segment to UCB process. </p>
<p>Sets contents in <code>data</code> structure determining the bandwidth of the analysis window for the UCB process. The settings are determined by the <code>--fmin</code> and <code>--samples</code> command line args and the proces ID number.</p>
<p>The <code>--fmin</code> and <code>--samples</code> arguments are overridden if the file <code>ucb_frequency_spacing.dat</code> is found in the run directory. </p>

</div>
</div>
<a id="a2cde83c4a3ac7eb9b865ff213dd129c7" name="a2cde83c4a3ac7eb9b865ff213dd129c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cde83c4a3ac7eb9b865ff213dd129c7">&#9670;&#160;</a></span>setup_ucb_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_ucb_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structUCBData.html">UCBData</a> *</td>          <td class="paramname"><span class="paramname"><em>ucb_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structTDI.html">TDI</a> *</td>          <td class="paramname"><span class="paramname"><em>tdi_full</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize memory for GB structures. </p>
<p>Allocates memory for internals of the data structures, initializes values, assigns frequency segment, and loads/shares saved ucb catalog file if one is specified at the command line with the <code>--catalog</code> flag. </p>

</div>
</div>
<a id="ab084e3d2014cad2518adba58bddf8d4d" name="ab084e3d2014cad2518adba58bddf8d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab084e3d2014cad2518adba58bddf8d4d">&#9670;&#160;</a></span>update_ucb_sampler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int update_ucb_sampler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structUCBData.html">UCBData</a> *</td>          <td class="paramname"><span class="paramname"><em>ucb_data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evolve state of UCB model. </p>
<p>Executes a fixed number of MCMC, RJMCMC, and PTMCMC steps for each of the parallel tempered chains. Each chain executes <code>numSteps</code> cycles of 100 model updates (90% MCMC, 10% RJCMMC0. The chains are updated in parallel on different threads using <code>OpenMP</code>. The state of the After all of those cycles are completed the PTMCMC swap is tried, the current state is written to file, and the model iteration counter is advanced by <code>numSteps</code>.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if sampler is completed </dd>
<dd>
1 else </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_6f345ece8e376ca033dcc87d17ffcc55.html">globalfit</a></li><li class="navelem"><a class="el" href="dir_7fde38eafcf7a57e5af8422c7cf42975.html">src</a></li><li class="navelem"><a class="el" href="glass__ucb__wrapper_8h.html">glass_ucb_wrapper.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
